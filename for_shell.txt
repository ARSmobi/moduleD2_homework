from news.models import *
user1 = User.objects.create(username='Артур', first_name='Баширов')
Author.objects.create(authorUser=user1)
user2 = User.objects.create(username='Геннадий', first_name='Быков')
Author.objects.create(authorUser=user2)
Category.objects.create(name='IT')
Category.objects.create(name='Education')
Post.objects.create(author=Author.objects.get(authorUser=User.objects.get(username='Артур')), categoryType='NW', title='Первая новость', text='Текст первого новостного поста')
Post.objects.create(author=Author.objects.get(authorUser=User.objects.get(username='Геннадий')), categoryType='AR', title='Первая статья', text='Текст первой созданной статьи')
Post.objects.create(author=Author.objects.get(authorUser=User.objects.get(username='Геннадий')), categoryType='NW', title='Новость другая', text='Текст другой созданной новости')
Post.objects.create(author=Author.objects.get(authorUser=User.objects.get(username='Артур')), categoryType='AR', title='Ещё одна статья', text='Текст ещё одной статьи')
p1 = Post.objects.get(pk=1)
p2 = Post.objects.get(pk=2)
p3 = Post.objects.get(pk=3)
c1 = Category.objects.get(name='IT')
c2 = Category.objects.get(name='Education')
p1.postCategory.add(c1)
p2.postCategory.add(c1, c2)
p3.postCategory.add(c2)
Comment.objects.create(commentUser=User.objects.get(username='Артур'), commentPost=Post.objects.get(pk=1), text='Комментарий на первую новость')
Comment.objects.create(commentUser=User.objects.get(username='Артур'), commentPost=Post.objects.get(pk=2), text='Комментарий на первую статью')
Comment.objects.create(commentUser=User.objects.get(username='Геннадий'), commentPost=Post.objects.get(pk=3), text='Комментарий на другую новость')
Comment.objects.create(commentUser=User.objects.get(username='Геннадий'), commentPost=Post.objects.get(pk=4), text='Комментарий для ещё одной статьи')
Post.objects.get(pk=1).like()
Post.objects.get(pk=1).like()
Post.objects.get(pk=1).like()
Post.objects.get(pk=1).like()
Post.objects.get(pk=2).like()
Post.objects.get(pk=3).like()
Post.objects.get(pk=3).dislike()
Post.objects.get(pk=3).dislike()
Post.objects.get(pk=3).dislike()
Post.objects.get(pk=4).like()
Post.objects.get(pk=4).dislike()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=1).like()
Comment.objects.get(pk=1).dislike()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=2).dislike()
Comment.objects.get(pk=3).like()
Comment.objects.get(pk=4).like()
Comment.objects.get(pk=4).like()
Author.objects.get(authorUser=User.objects.get(username='Антон')).update_rating()
Author.objects.get(authorUser=User.objects.get(username='Геннадий')).update_rating()
Author.objects.get(authorUser=User.objects.get(username='Геннадий')).ratingAuthor
Author.objects.get(authorUser=User.objects.get(username='Антон')).ratingAuthor
best_author = Author.objects.all().order_by('-ratingAuthor').values('authorUser', 'ratingAuthor')[0]
print(best_author)
best_post = Post.objects.all().order_by('-rating').values('dateCreation', 'author', 'rating', 'title', 'text')[0]
print(f'имя автора лучшего поста: {User.objects.get(pk=best_post["author"])}')
print(f'Дата добавления лучшего поста: {best_post["dateCreation"]}')
print(f'Рейтинг лучшего поста: {best_post["rating"]}')
print(f'Заголовок лучшего поста: {best_post["title"]}')
print(f'Текст лучшего поста: {best_post["text"]}')
bp_comments = Comment.objects.filter(pk=best_post['author']).values('dateCreation', 'commentUser', 'rating', 'text')
print(bp-comments)